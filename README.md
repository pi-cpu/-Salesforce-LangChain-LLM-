# 📄 商談要約エージェント (Salesforce × LangChain × LLM)

## 1. プロジェクト概要
本プロジェクトは、Salesforce の商談（Opportunity）の説明文や活動履歴を外部 LLM（例: GPT, Claude）に渡し、要約を生成する PoC（Proof of Concept）です。  

Salesforce 標準の AI 機能（Agentforce / Prompt Builder）は高機能ですが、契約コストが高額であるという課題があります。本プロジェクトは **約1/100以下のコスト** で商談要約を実現できる代替案を提示します。  

---

## 2. 主な機能
- Salesforce API から商談レコードを取得  
- LangChain を利用して LLM にテキスト送信  
- 商談の説明文を要約して返却  
- 要約結果を Chatter に自動投稿  

---

## 3. 使用技術
- **Salesforce API (REST / Apex Callout)**  
- **LangChain** (Pythonベースの LLM フレームワーク)  
- **外部LLM API**（例: OpenAI GPT-4o-mini, Claude 3 Sonnet）  
- **Heroku / Localhost**（動作環境例）  

---

## 4. システム構成図（イメージ）


---

## 5. コスト比較（比率ベース）

| 項目 | Salesforce公式 (Agentforce) | 自前構築 (LangChain+LLM) |
|------|-----------------------------|---------------------------|
| 初期導入 | 高額な追加契約が必要 | 既存契約＋少しの開発工数 |
| 継続コスト | 高額（月額数十万〜百万円規模） | **約1/100以下**（利用量依存） |
| 柔軟性 | 標準機能に依存 | 拡張・統合自由自在 |
| 安全性 | Salesforce保証 | 自社で担保が必要 |

---

## 6. デモの流れ
1. Salesforce 上の商談レコードを用意（Description フィールドに情報入力）  
2. Python スクリプト（LangChain）を実行  
3. LLM による要約を取得  
4. Chatter に自動投稿  
5. Salesforce 画面で要約結果を確認  

---

## 7. 今後の拡張（保守・運用性の向上）
本プロジェクトはPoC段階ですが、実運用を見据えて以下の拡張を検討しています。これらは特に、Salesforce導入企業で多く見られる「引き継ぎが属人的になりやすい」「新システムとの連携が難しい」といった課題を解決することを目的としています。  

- **設定管理のGUI化**  
  管理者が「要約対象のフィールド」や「要約の長さ」を画面上から変更可能にすることで、コード改修に依存しない柔軟な運用を実現します。これにより、担当者交代や引き継ぎが容易になります。  

- **要約履歴のバージョン管理**  
  自動生成された要約を履歴として保存し、過去の要約にいつでもアクセス可能にします。これにより、更新経緯やAIの出力内容を追跡でき、運用トラブル時の原因特定を支援します。  

- **ログ・モニタリング機能**  
  LLM API呼び出しの成功・失敗や処理時間を記録する仕組みを導入します。運用中のトラブルシューティングが容易になり、安定稼働をサポートします。  

- **サーバーレス実装による軽量化**  
  AWS Lambda や Google Cloud Functions 上で処理を動かすことで、インフラの保守コストを削減しつつ、スケーラビリティを確保します。新しいシステムとの連携にも対応しやすい設計を目指します。  

- **データガバナンス対応**  
  要約結果はSalesforce内部（Chatterやカスタムオブジェクト）に格納し、外部に残さない構成を選択可能にします。個人情報や機密データを扱う企業でも安心して利用できるようにします。  

---

## 8. 価値提案 (Value Proposition)
- **低コスト PoC**: Agentforce 導入前に、安価にAI活用を試す手段を提供  
- **保守性と拡張性**: 引き継ぎや新システム連携を考慮した設計で、長期運用に耐えられる  
- **競争優位性**: 中小企業でもAIを使った業務効率化を実現可能  

---